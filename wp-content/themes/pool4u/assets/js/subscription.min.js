"use strict";!function(){var e=document.querySelectorAll(".wp-block-headspin-subscribe-form .subscribe-form");if(console.log(e),e)for(var a={general_error:"Noe gikk galt. Last siden på nytt og prøv igjen. Hvis problemet vedvarer, vennligst ta kontakt.",success:"Påmelding registrert",invalid_email:"E-postadressen er ikke gyldig",captcha_failed:"Captcha feilet. Prøv å send skjemaet på nytt. Hvis problemet vedvarer, vennligst ta kontakt.",member_exists:"Du abonnerer allerede på vårt nyhetsbrev.",member_permanently_deleted:"Du har tidligere avsluttet abonnementet på historier og nyheter, og kunne derfor ikke legges til på nytt. Ta kontakt med oss for å abonnere på nytt.",mc_general_error:"Noe gikk galt med påmeldingen til nyhetsbrevet. Hvis problemet vedvarer, vennligst ta kontakt."},t=0;t<e.length;t++)e[t].addEventListener("submit",function(e){var t=this;if(e.preventDefault(),this.disabled)return!1;var e=this.getAttribute("action"),r=serializeForm(this),s=this.querySelector(".messages"),n=(s.innerHTML="",this.classList.add("sending"),new XMLHttpRequest);n.onreadystatechange=function(){if(4==this.readyState){var e;t.classList.remove("sending");try{e=JSON.parse(n.responseText)}catch(e){return void(s.innerHTML+="<li class='error'>"+a.general_error+"</li>")}if(200==e.status&&"success"==e.message)return s.innerHTML="<li class='success'>"+a.success+"</li>",t.disabled=!0,t.classList.add("disabled"),void gtag("event","abonnere",{event_category:"klikk",event_label:"nyhetsbrev"});a.hasOwnProperty(e.message)?s.innerHTML="<li class='error'>"+a[e.message]+"</li>":s.innerHTML="<li class='error'>"+a.general_error+"</li>"}loadRecaptcha()},n.open("POST",e,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(r)})}();